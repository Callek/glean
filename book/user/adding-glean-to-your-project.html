<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Adding Glean to your project - Glean - Cross-platform Telemetry library</title>
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css">
        <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:500" rel="stylesheet" type="text/css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
        <link rel="stylesheet" href="../tabs.css">
        

        
    </head>
    <body class="light">
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "../";
            var default_theme = "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            document.body.className = theme;
            document.querySelector('html').className = theme + ' js';
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li><a href="../index.html"><strong aria-hidden="true">1.</strong> Glean</a></li><li><a href="../user/index.html"><strong aria-hidden="true">2.</strong> Using the Glean SDK</a></li><li><ol class="section"><li><a href="../user/adding-glean-to-your-project.html" class="active"><strong aria-hidden="true">2.1.</strong> Adding Glean to your project</a></li><li><a href="../user/general-api.html"><strong aria-hidden="true">2.2.</strong> The General API</a></li><li><a href="../user/adding-new-metrics.html"><strong aria-hidden="true">2.3.</strong> Adding new metrics</a></li><li><a href="../user/metric-parameters.html"><strong aria-hidden="true">2.4.</strong> Metric parameters</a></li><li><a href="../user/testing-metrics.html"><strong aria-hidden="true">2.5.</strong> Testing metrics</a></li><li><a href="../user/debugging/index.html"><strong aria-hidden="true">2.6.</strong> Debugging products using Glean</a></li><li><ol class="section"><li><a href="../user/debugging/android.html"><strong aria-hidden="true">2.6.1.</strong> Android</a></li><li><a href="../user/debugging/ios.html"><strong aria-hidden="true">2.6.2.</strong> iOS</a></li></ol></li><li><a href="../user/error-reporting.html"><strong aria-hidden="true">2.7.</strong> Error reporting</a></li><li><a href="../user/experiments-api.html"><strong aria-hidden="true">2.8.</strong> Using the experiments API</a></li><li><a href="../user/metrics/index.html"><strong aria-hidden="true">2.9.</strong> Metric types</a></li><li><ol class="section"><li><a href="../user/metrics/boolean.html"><strong aria-hidden="true">2.9.1.</strong> Boolean</a></li><li><a href="../user/metrics/counter.html"><strong aria-hidden="true">2.9.2.</strong> Counter</a></li><li><a href="../user/metrics/labeled_counters.html"><strong aria-hidden="true">2.9.3.</strong> Labeled Counters</a></li><li><a href="../user/metrics/string.html"><strong aria-hidden="true">2.9.4.</strong> String</a></li><li><a href="../user/metrics/labeled_strings.html"><strong aria-hidden="true">2.9.5.</strong> Labeled Strings</a></li><li><a href="../user/metrics/string_list.html"><strong aria-hidden="true">2.9.6.</strong> String List</a></li><li><a href="../user/metrics/timespan.html"><strong aria-hidden="true">2.9.7.</strong> Timespan</a></li><li><a href="../user/metrics/timing_distribution.html"><strong aria-hidden="true">2.9.8.</strong> Timing Distribution</a></li><li><a href="../user/metrics/memory_distribution.html"><strong aria-hidden="true">2.9.9.</strong> Memory Distribution</a></li><li><a href="../user/metrics/uuid.html"><strong aria-hidden="true">2.9.10.</strong> UUID</a></li><li><a href="../user/metrics/datetime.html"><strong aria-hidden="true">2.9.11.</strong> Datetime</a></li><li><a href="../user/metrics/event.html"><strong aria-hidden="true">2.9.12.</strong> Event</a></li><li><a href="../user/metrics/custom_distribution.html"><strong aria-hidden="true">2.9.13.</strong> Custom Distribution</a></li><li><a href="../user/metrics/quantity.html"><strong aria-hidden="true">2.9.14.</strong> Quantity</a></li></ol></li><li><a href="../user/pings/index.html"><strong aria-hidden="true">2.10.</strong> Pings</a></li><li><ol class="section"><li><a href="../user/pings/baseline.html"><strong aria-hidden="true">2.10.1.</strong> Baseline Ping</a></li><li><a href="../user/pings/deletion_request.html"><strong aria-hidden="true">2.10.2.</strong> Deletion Request Ping</a></li><li><a href="../user/pings/metrics.html"><strong aria-hidden="true">2.10.3.</strong> Metrics Ping</a></li><li><a href="../user/pings/events.html"><strong aria-hidden="true">2.10.4.</strong> Events Ping</a></li><li><a href="../user/pings/custom.html"><strong aria-hidden="true">2.10.5.</strong> Custom Pings</a></li><li><a href="../user/pings/testing-custom-pings.html"><strong aria-hidden="true">2.10.6.</strong> Testing custom pings</a></li></ol></li><li><a href="../user/android-build-configuration-options.html"><strong aria-hidden="true">2.11.</strong> Android build configuration options</a></li><li><a href="../user/focused-use-cases.html"><strong aria-hidden="true">2.12.</strong> Focused Use Cases</a></li><li><ol class="section"><li><a href="../user/instrument-android-crashes-example.html"><strong aria-hidden="true">2.12.1.</strong> Instrumenting Android Crashes With Glean</a></li></ol></li></ol></li><li><a href="../user/collected-metrics/metrics.html"><strong aria-hidden="true">3.</strong> Metrics collected by the Glean SDK</a></li><li><a href="../dev/index.html"><strong aria-hidden="true">4.</strong> Developing the Glean SDK</a></li><li><ol class="section"><li><a href="../dev/testing.html"><strong aria-hidden="true">4.1.</strong> Testing</a></li><li><a href="../dev/docs.html"><strong aria-hidden="true">4.2.</strong> Developing documentation</a></li><li><a href="../dev/android/index.html"><strong aria-hidden="true">4.3.</strong> Android bindings</a></li><li><ol class="section"><li><a href="../dev/android/setup-android-build-environment.html"><strong aria-hidden="true">4.3.1.</strong> Setup Build Environment</a></li></ol></li><li><a href="../dev/ios/index.html"><strong aria-hidden="true">4.4.</strong> iOS bindings</a></li><li><ol class="section"><li><a href="../dev/ios/setup-ios-build-environment.html"><strong aria-hidden="true">4.4.1.</strong> Setup Build Environment</a></li><li><a href="../dev/ios/debug-glean-on-ios.html"><strong aria-hidden="true">4.4.2.</strong> Debugging Different Versions of Glean</a></li></ol></li><li><a href="../dev/python/index.html"><strong aria-hidden="true">4.5.</strong> Python bindings</a></li><li><ol class="section"><li><a href="../dev/python/setting-up-python-build-environment.html"><strong aria-hidden="true">4.5.1.</strong> Setup Build Environment</a></li></ol></li><li><a href="../dev/core/index.html"><strong aria-hidden="true">4.6.</strong> Rust Component</a></li><li><ol class="section"><li><a href="../dev/core/dependency-management.html"><strong aria-hidden="true">4.6.1.</strong> Dependency Management</a></li><li><a href="../dev/core/new-metric-type.html"><strong aria-hidden="true">4.6.2.</strong> Adding a new metric type</a></li><li><ol class="section"><li><a href="../dev/core/new-metric-type/ffi.html"><strong aria-hidden="true">4.6.2.1.</strong> FFI</a></li><li><a href="../dev/core/new-metric-type/kotlin.html"><strong aria-hidden="true">4.6.2.2.</strong> Kotlin</a></li><li><a href="../dev/core/new-metric-type/swift.html"><strong aria-hidden="true">4.6.2.3.</strong> Swift</a></li></ol></li></ol></li><li><a href="../dev/ffi/index.html"><strong aria-hidden="true">4.7.</strong> FFI Layer</a></li><li><ol class="section"><li><a href="../dev/ffi/when-to-use-what-in-the-ffi.html"><strong aria-hidden="true">4.7.1.</strong> When/How FFI</a></li></ol></li><li><a href="../contributing.html"><strong aria-hidden="true">4.8.</strong> Contributing</a></li><li><ol class="section"><li><a href="../code_coverage.html"><strong aria-hidden="true">4.8.1.</strong> Code coverage</a></li></ol></li><li><a href="../dev/cut-a-new-release.html"><strong aria-hidden="true">4.9.</strong> Release process</a></li><li><a href="../dev/core/internal/index.html"><strong aria-hidden="true">4.10.</strong> Internal implementation details</a></li><li><ol class="section"><li><a href="../dev/core/internal/reserved-ping-names.html"><strong aria-hidden="true">4.10.1.</strong> Reserved ping names</a></li><li><a href="../dev/core/internal/clearing.html"><strong aria-hidden="true">4.10.2.</strong> Clearing metrics when disabling/enabling Glean</a></li><li><a href="../dev/core/internal/payload.html"><strong aria-hidden="true">4.10.3.</strong> Payload format</a></li><li><a href="../dev/core/internal/directory-structure.html"><strong aria-hidden="true">4.10.4.</strong> Directory structure</a></li><li><a href="../dev/core/internal/debug-pings.html"><strong aria-hidden="true">4.10.5.</strong> Debug Pings</a></li></ol></li><li><a href="../dev/howtos/index.html"><strong aria-hidden="true">4.11.</strong> Howtos</a></li><li><ol class="section"><li><a href="../dev/howtos/development-with-android-components.html"><strong aria-hidden="true">4.11.1.</strong> Development with android-components</a></li><li><a href="../dev/howtos/locally-published-components-in-fenix.html"><strong aria-hidden="true">4.11.2.</strong> Locally-published components in Fenix</a></li></ol></li></ol></li><li><a href="../api/index.html"><strong aria-hidden="true">5.</strong> API Documentation</a></li><li><a href="../appendix/index.html"><strong aria-hidden="true">6.</strong> Appendix</a></li><li><ol class="section"><li><a href="../appendix/glossary.html"><strong aria-hidden="true">6.1.</strong> Glossary</a></li><li><a href="../appendix/changelog.html"><strong aria-hidden="true">6.2.</strong> Changelog</a></li><li><a href="../appendix/twig.html"><strong aria-hidden="true">6.3.</strong> This Week in Glean</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar" class="menu-bar">
                    <div id="menu-bar-sticky-container">
                        <div class="left-buttons">
                            <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                                <i class="fa fa-bars"></i>
                            </button>
                            <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                                <i class="fa fa-paint-brush"></i>
                            </button>
                            <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                                <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                                <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            </ul>
                            
                            <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                                <i class="fa fa-search"></i>
                            </button>
                            
                        </div>

                        <h1 class="menu-title">Glean - Cross-platform Telemetry library</h1>

                        <div class="right-buttons">
                            <a href="../print.html" title="Print this book" aria-label="Print this book">
                                <i id="print-button" class="fa fa-print"></i>
                            </a>
                            
                        </div>
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1><a class="header" href="#adding-glean-to-your-project" id="adding-glean-to-your-project">Adding Glean to your project</a></h1>
<h2><a class="header" href="#before-using-glean" id="before-using-glean">Before using Glean</a></h2>
<p>Products using the Glean SDK to collect telemetry <strong>must</strong>:</p>
<ul>
<li>add documentation for any new metric collected with the library in its repository (see <a href="pings/index.html">an example</a>);</li>
<li>go through data review for the newly collected data by following <a href="https://wiki.mozilla.org/Firefox/Data_Collection">this process</a>;</li>
<li>provide a way for users to turn data collection off (e.g. providing settings to control
<code>Glean.setUploadEnabled()</code>).</li>
</ul>
<h2><a class="header" href="#usage" id="usage">Usage</a></h2>
<h3><a class="header" href="#integrating-with-your-project" id="integrating-with-your-project">Integrating with your project</a></h3>
<div class="tabs">
<div class="tabbar"></div>
<div class="tabcontents">
<div data-lang="Kotlin" class="tab">
<h4><a class="header" href="#setting-up-the-dependency" id="setting-up-the-dependency">Setting up the dependency</a></h4>
<p>Glean is published on <a href="https://maven.mozilla.org/">maven.mozilla.org</a>.
To use it, you need to add the following to your project's top-level build file,
in the <code>allprojects</code> block (see e.g. <a href="https://github.com/mozilla/glean/blob/master/build.gradle">Glean's own <code>build.gradle</code></a>):</p>
<pre><code class="language-Groovy">repositories {
    maven {
       url &quot;https://maven.mozilla.org/maven2&quot;
    }
}
</code></pre>
<p>Each module that uses Glean needs to specify it in its build file, in the <code>dependencies</code> block.
Add this to your Gradle configuration:</p>
<pre><code class="language-Groovy">implementation &quot;org.mozilla.components:service-glean:{latest-version}&quot;
</code></pre>
<blockquote>
<p><strong>Important:</strong> the <code>{latest-version}</code> placeholder in the above link should be replaced with the version number of the Glean SDK used by the project.</p>
</blockquote>
<p>For example, if version <em>6.0.2</em> is used, then the include directive becomes:</p>
<pre><code class="language-Groovy">implementation &quot;org.mozilla.components:service-glean:6.0.2&quot;
</code></pre>
<p>The Glean SDK is released as part of <a href="https://github.com/mozilla-mobile/android-components">android-components</a>.  Therefore, it follows android-components' versions.
The <a href="https://github.com/mozilla-mobile/android-components/releases/">android-components release page</a> can be used to determine the latest version.</p>
</div>
<div data-lang="Swift" class="tab">
<h4><a class="header" href="#setting-up-the-dependency-1" id="setting-up-the-dependency-1">Setting up the dependency</a></h4>
<p>Glean can be consumed through <a href="https://github.com/Carthage/Carthage">Carthage</a>, a dependency manager for macOS and iOS.
For consuming the latest version of Glean, add the following line to your <code>Cartfile</code>:</p>
<pre><code>github &quot;mozilla/glean&quot; &quot;{latest-version}&quot;
</code></pre>
<blockquote>
<p><strong>Important:</strong> the <code>{latest-version}</code> placeholder should be replaced with the version number of the latest Glean SDK release.
You can find the version number on the <a href="https://github.com/mozilla/glean/releases/latest">release page</a>.</p>
</blockquote>
<p>Then check out and build the new dependency:</p>
<pre><code>carthage update --platform iOS
</code></pre>
<h4><a class="header" href="#integrating-with-the-build-system" id="integrating-with-the-build-system">Integrating with the build system</a></h4>
<p>For integration with the build system you can follow the <a href="https://github.com/Carthage/Carthage#quick-start">Carthage Quick Start steps</a>.</p>
<ol>
<li>
<p>After building the dependency one drag the built <code>.framework</code> binaries from <code>Carthage/Build/iOS</code> into your application's Xcode project.</p>
</li>
<li>
<p>On your application targets' Build Phases settings tab, click the <code>+</code> icon and choose <code>New Run Script Phase</code>.
If you already use Carthage for other dependencies, extend the existing step.
Create a Run Script in which you specify your shell (ex: <code>/bin/sh</code>), add the following contents to the script area below the shell:</p>
<pre><code>/usr/local/bin/carthage copy-frameworks
</code></pre>
</li>
<li>
<p>Add the path to the Glean framework under &quot;Input Files&quot;:</p>
<pre><code>$(SRCROOT)/Carthage/Build/iOS/Glean.framework
</code></pre>
</li>
<li>
<p>Add the paths to the copied framework to the &quot;Output Files&quot;:</p>
<pre><code>$(BUILT_PRODUCTS_DIR)/$(FRAMEWORKS_FOLDER_PATH)/Glean.framework
</code></pre>
</li>
</ol>
</div>
<div data-lang="Python" class="tab">
<p>It is recommended that you use a virtual environment for your work to isolate the dependencies for your project. There are many popular abstractions on top of virtual environments in the Python ecosystem which can help manage your project dependencies.</p>
<p>The Python Glean bindings currently have <a href="https://pypi.org/project/glean-sdk/#files">prebuilt wheels on PyPI for x86_64 Linux only</a>.</p>
<p>If you're running that platform and have your virtual environment set up and activated, you can install Glean into it using:</p>
<pre><code class="language-bash">$ python -m pip install glean_sdk
</code></pre>
<p>If you are not on x86_64 Linux, you will need to build the Glean Python bindings from source using <a href="../dev/python/setting-up-python-build-environment.html">these instructions</a>.</p>
</div>
</div>
</div>
<h3><a class="header" href="#adding-new-metrics" id="adding-new-metrics">Adding new metrics</a></h3>
<p>All metrics that your project collects must be defined in a <code>metrics.yaml</code> file.</p>
<p>The format of that file is documented <a href="https://mozilla.github.io/glean_parser/metrics-yaml.html">with <code>glean_parser</code></a>.
To learn more, see <a href="adding-new-metrics.html">adding new metrics</a>.</p>
<blockquote>
<p><strong>Important</strong>: as stated <a href="adding-glean-to-your-project.html#before-using-glean">before</a>, any new data collection requires documentation and data-review.
This is also required for any new metric automatically collected by the Glean SDK.</p>
</blockquote>
<div class="tabs">
<div class="tabbar"></div>
<div class="tabcontents">
<div data-lang="Kotlin" class="tab">
<p>In order for the Glean SDK to generate an API for your metrics, two Gradle plugins must be included in your build:</p>
<ul>
<li>The <a href="https://github.com/mozilla/glean/tree/master/gradle-plugin/">Glean Gradle plugin</a></li>
<li>JetBrains' <a href="https://github.com/JetBrains/gradle-python-envs/">Python envs plugin</a></li>
</ul>
<p>The Glean Gradle plugin is distributed through Mozilla's Maven, so we need to tell your build where to look for it by adding the following to the top of your <code>build.gradle</code>:</p>
<pre><code>buildscript {
    repositories {
        maven {
            url &quot;https://maven.mozilla.org/maven2&quot;
        }

        dependencies {
            classpath &quot;org.mozilla.telemetry:glean-gradle-plugin:{latest-version}&quot;
        }
    }
}
</code></pre>
<blockquote>
<p><strong>Important:</strong> as above, the <code>{latest-version}</code> placeholder in the above link should be replaced with the version number of the Glean SDK used by the project.</p>
</blockquote>
<p>The JetBrains Python plugin is distributed in the Gradle plugin repository, so it can be included with:</p>
<pre><code class="language-Groovy">plugins {
    id &quot;com.jetbrains.python.envs&quot; version &quot;0.0.26&quot;
}
</code></pre>
<p>Right before the end of the same file, we need to apply the Glean Gradle plugin:</p>
<pre><code class="language-Groovy">apply plugin: &quot;org.mozilla.telemetry.glean-gradle-plugin&quot;
</code></pre>
<p>There are <a href="android-build-configuration-options.html">additional parameters</a> that can be set to control the behavior of the Glean Gradle plugin, but they are rarely needed for normal use.</p>
<blockquote>
<p><strong>Note:</strong> Earlier versions of Glean used a Gradle script (<code>sdk_generator.gradle</code>) rather than a Gradle plugin. Its use is deprecated and projects should be updated to use the Gradle plugin as described above.</p>
</blockquote>
</div>
<div data-lang="Swift" class="tab">
<p>The <code>metrics.yaml</code> file is parsed at build time and Swift code is generated.
Add a new <code>metrics.yaml</code> file to your Xcode project.</p>
<p>Follow these steps to automatically run the parser at build time:</p>
<ol>
<li>
<p>Download the <code>sdk_generator.sh</code> script from the Glean repository:</p>
<pre><code>https://raw.githubusercontent.com/mozilla/glean/{latest-release}/glean-core/ios/sdk_generator.sh
</code></pre>
<blockquote>
<p><strong>Important:</strong> as above, the <code>{latest-version}</code> placeholder should be replaced with the version number of Glean SDK release used in this project.</p>
</blockquote>
</li>
<li>
<p>Add the <code>sdk_generator.sh</code> file to your Xcode project.</p>
</li>
<li>
<p>On your application targets' Build Phases settings tab, click the <code>+</code> icon and choose <code>New Run Script Phase</code>.
Create a Run Script in which you specify your shell (ex: <code>/bin/sh</code>), add the following contents to the script area below the shell:</p>
<pre><code>bash $PWD/sdk_generator.sh
</code></pre>
</li>
<li>
<p>Add the path to your <code>metrics.yaml</code> and (optionally) <code>pings.yaml</code> under &quot;Input files&quot;:</p>
<pre><code>$(SRCROOT)/{project-name}/metrics.yaml
$(SRCROOT)/{project-name}/pings.yaml
</code></pre>
</li>
<li>
<p>Add the paths to the generated code files to the &quot;Output Files&quot;:</p>
<pre><code>$(SRCROOT)/{project-name}/Generated/{YourCategory}.swift
</code></pre>
<blockquote>
<p><strong>Important</strong>: The parser generates one file per category.
If you are unsure which files those are, skip this step and add the files after they are generated for the first time.</p>
</blockquote>
</li>
<li>
<p>If you are using Git, add the following line to your <code>.gitignore</code> file:</p>
<pre><code>{project-name}/Generated
</code></pre>
</li>
</ol>
</div>
<div data-lang="Python" class="tab">
<blockquote>
<p><strong>Important:</strong> The Python bindings are already being used internally for testing of Mozilla's data platform.
However, they are not ready for production or inclusion in applications that are distributed to end users.
Progress on this support is being <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1598673">tracked in this bug</a>.</p>
</blockquote>
<p>For Python, the <code>metrics.yaml</code> file must be available and loaded at runtime.</p>
<p>If your project is a script (i.e. just Python files in a directory), you can load the <code>metrics.yaml</code> using:</p>
<pre><code class="language-Python">from glean import load_metrics

metrics = load_metrics(&quot;metrics.yaml&quot;)

# Use a metric on the returned object
metrics.your_category.your_metric.set(&quot;value&quot;)
</code></pre>
<p>If your project is a distributable Python package, you need to include the <code>metrics.yaml</code> file using <a href="https://setuptools.readthedocs.io/en/latest/setuptools.html#including-data-files">one of the myriad ways to include data in a Python package</a> and then use <a href="https://setuptools.readthedocs.io/en/latest/pkg_resources.html#resource-extraction"><code>pkg_resources.resource_filename()</code></a> to get the filename at runtime.</p>
<pre><code class="language-Python">from glean import load_metrics
from pkg_resources import resource_filename

metrics = load_metrics(resource_filename(__name__, &quot;metrics.yaml&quot;))

# Use a metric on the returned object
metrics.your_category.your_metric.set(&quot;value&quot;)
</code></pre>
</div>
</div>
</div>
<h3><a class="header" href="#adding-custom-pings" id="adding-custom-pings">Adding custom pings</a></h3>
<p>Please refer to the <a href="pings/custom.html">custom pings documentation</a>.</p>
<blockquote>
<p><strong>Important</strong>: as stated <a href="adding-glean-to-your-project.html#before-using-glean">before</a>, any new data collection requires documentation and data-review.
This is also required for any new metric automatically collected by the Glean SDK.</p>
</blockquote>
<h3><a class="header" href="#testing-metrics" id="testing-metrics">Testing metrics</a></h3>
<p>In order to make testing metrics easier 'out of the box', all metrics include a set of test API functions in order to facilitate unit testing.  These include functions to test whether a value has been stored, and functions to retrieve the stored value for validation.  For more information, please refer to <a href="testing-metrics.html">Unit testing Glean metrics</a>.</p>
<h3><a class="header" href="#adding-metadata-about-your-project-to-the-pipeline" id="adding-metadata-about-your-project-to-the-pipeline">Adding metadata about your project to the pipeline</a></h3>
<p>In order for data to be collected from your project, its application id must be registered in the pipeline.</p>
<p><a href="https://bugzilla.mozilla.org/enter_bug.cgi?product=Data%20Platform%20and%20Tools&amp;component=General&amp;short_desc=Glean:%20Enable%20application%20id%20org.mozilla.myProduct">File a data engineering bug</a> to enable your product's application id.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                            <a rel="prev" href="../user/index.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>
                        

                        
                            <a rel="next" href="../user/general-api.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>
                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                    <a href="../user/index.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>
                

                
                    <a href="../user/general-api.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
                
            </nav>

        </div>

        

        

        

        
        <script src="../elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="../clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="../highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="../book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
        <script type="text/javascript" src="../tabs.js"></script>
        

        

    </body>
</html>
